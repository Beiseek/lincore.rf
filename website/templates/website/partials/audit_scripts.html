<script>
document.addEventListener('DOMContentLoaded', function() {
    // Initialize AOS
    if (typeof AOS !== 'undefined') {
        AOS.init({
            duration: 800,
            easing: 'ease-out-cubic',
            once: true,
            offset: 100
        });
    }

    // Parallax effect for hero section
    window.addEventListener('scroll', () => {
        const scrolled = window.pageYOffset;
        const parallaxElements = document.querySelectorAll('.hero-particles, .hero-gradient');
        
        parallaxElements.forEach(element => {
            const speed = 0.5;
            element.style.transform = `translateY(${scrolled * speed}px)`;
        });
    });

    // Counter animation for hero stats
    function animateCounters() {
        const counters = document.querySelectorAll('[data-count]');
        counters.forEach(counter => {
            const target = parseInt(counter.dataset.count);
            const duration = 2000;
            animateNumber(counter, 0, target, duration);
        });
    }
    
    function animateNumber(element, start, end, duration) {
        const startTime = performance.now();
        
        function update(currentTime) {
            const elapsed = currentTime - startTime;
            const progress = Math.min(elapsed / duration, 1);
            const current = Math.floor(start + (end - start) * progress);
            element.textContent = current;
            
            if (progress < 1) {
                requestAnimationFrame(update);
            }
        }
        requestAnimationFrame(update);
    }
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                animateCounters();
                observer.disconnect();
            }
        });
    });
    
    const statsSection = document.querySelector('.hero-stats');
    if (statsSection) {
        observer.observe(statsSection);
    }

    // Navigation Pills functionality
    const pills = document.querySelectorAll('.pill-btn');
    const progressFill = document.querySelector('.progress-fill');
    
    function updateProgress(activeIndex) {
        const progress = ((activeIndex + 1) / pills.length) * 100;
        if (progressFill) {
            progressFill.style.width = `${progress}%`;
        }
    }
    
    pills.forEach((pill, index) => {
        pill.addEventListener('click', function() {
            pills.forEach(p => p.classList.remove('active'));
            this.classList.add('active');
            updateProgress(index);
            
            const target = this.dataset.target;
            const targetElement = document.getElementById(target);
            
            if (targetElement) {
                const offset = 100;
                const elementPosition = targetElement.offsetTop;
                const offsetPosition = elementPosition - offset;
                
                window.scrollTo({
                    top: offsetPosition,
                    behavior: 'smooth'
                });
            }
        });
    });

    // MEGA Service Cards Enhanced Effects
    const megaServiceCards = document.querySelectorAll('.mega-service-card');
    
    megaServiceCards.forEach((card, index) => {
        card.addEventListener('mouseenter', function() {
            const particles = this.querySelector('.icon-particles');
            const glow = this.querySelector('.mega-card-glow');
            const icon = this.querySelector('.mega-icon');
            
            if (particles) {
                particles.style.opacity = '1';
                particles.style.animation = 'rotate 5s linear infinite';
            }
            
            if (glow) {
                glow.style.opacity = '1';
                glow.style.transform = 'scale(1.2)';
            }
            
            if (icon) {
                icon.style.transform = 'scale(1.3) rotate(20deg)';
                icon.style.filter = 'brightness(1.3) drop-shadow(0 0 20px rgba(255,255,255,0.8))';
            }
            
            const badge = this.querySelector('.card-badge');
            if (badge) {
                badge.style.animation = 'shake 0.5s ease-in-out';
            }
        });
        
        card.addEventListener('mouseleave', function() {
            const particles = this.querySelector('.icon-particles');
            const glow = this.querySelector('.mega-card-glow');
            const icon = this.querySelector('.mega-icon');
            
            if (particles) {
                particles.style.opacity = '0';
            }
            
            if (glow) {
                glow.style.opacity = '0';
                glow.style.transform = 'scale(1)';
            }
            
            if (icon) {
                icon.style.transform = '';
                icon.style.filter = '';
            }
        });
        
        card.addEventListener('click', function() {
            this.style.transform = 'translateY(-15px) scale(0.98)';
            setTimeout(() => {
                this.style.transform = '';
            }, 150);
            
            showEnhancedNotification(`–£—Å–ª—É–≥–∞ "${this.querySelector('h3').textContent}" - –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã!`, 'info');
        });
    });

    // Interactive Why Cards - 3D Flip Effects
    const whyCards = document.querySelectorAll('.interactive-why-card');
    
    whyCards.forEach(card => {
        let isFlipped = false;
        
        card.addEventListener('click', function() {
            isFlipped = !isFlipped;
            
            if (isFlipped) {
                this.querySelector('.why-card-front').style.transform = 'rotateY(180deg)';
                this.querySelector('.why-card-back').style.transform = 'rotateY(0deg)';
            } else {
                this.querySelector('.why-card-front').style.transform = 'rotateY(0deg)';
                this.querySelector('.why-card-back').style.transform = 'rotateY(-180deg)';
            }
        });
        
        card.addEventListener('mouseenter', function() {
            if (!isFlipped) {
                this.querySelector('.why-card-front').style.transform = 'rotateY(180deg)';
                this.querySelector('.why-card-back').style.transform = 'rotateY(0deg)';
            }
        });
        
        card.addEventListener('mouseleave', function() {
            if (!isFlipped) {
                setTimeout(() => {
                    this.querySelector('.why-card-front').style.transform = 'rotateY(0deg)';
                    this.querySelector('.why-card-back').style.transform = 'rotateY(-180deg)';
                }, 2000);
            }
        });
    });

    // Documents Showcase Interactive Navigation
    const documentCards = document.querySelectorAll('.document-card');
    const navDots = document.querySelectorAll('.nav-dot');
    
    let currentDoc = 1;
    let autoSlideInterval;
    
    function showDocument(docNumber) {
        documentCards.forEach(card => card.classList.remove('active-doc'));
        navDots.forEach(dot => dot.classList.remove('active'));
        
        const activeCard = document.querySelector(`[data-doc="${docNumber}"]`);
        const activeDot = document.querySelector(`[data-target="${docNumber}"]`);
        
        if (activeCard) {
            activeCard.classList.add('active-doc');
            activeCard.style.zIndex = '100';
            
            documentCards.forEach((card, index) => {
                if (card !== activeCard) {
                    card.style.zIndex = 50 - index;
                }
            });
        }
        
        if (activeDot) {
            activeDot.classList.add('active');
        }
        
        currentDoc = docNumber;
        
        const docTitle = activeCard ? activeCard.querySelector('h4').textContent : '–î–æ–∫—É–º–µ–Ω—Ç';
        showFloatingMessage(`üìÑ ${docTitle}`, activeCard);
    }
    
    navDots.forEach(dot => {
        dot.addEventListener('click', function() {
            const targetDoc = parseInt(this.dataset.target);
            showDocument(targetDoc);
            
            clearInterval(autoSlideInterval);
            startAutoSlide();
        });
    });
    
    documentCards.forEach(card => {
        card.addEventListener('click', function() {
            const docNumber = parseInt(this.dataset.doc);
            showDocument(docNumber);
            showDocumentDetails(this);
        });
    });
    
    function startAutoSlide() {
        autoSlideInterval = setInterval(() => {
            currentDoc = currentDoc >= 5 ? 1 : currentDoc + 1;
            showDocument(currentDoc);
        }, 4000);
    }
    
    const documentsObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                startAutoSlide();
            } else {
                clearInterval(autoSlideInterval);
            }
        });
    }, { threshold: 0.5 });
    
    const documentsSection = document.querySelector('.documents-section');
    if (documentsSection) {
        documentsObserver.observe(documentsSection);
    }

    // Masonry Advantages Enhanced Interactions
    const masonryCards = document.querySelectorAll('.masonry-advantage-card');
    
    masonryCards.forEach((card, index) => {
        card.addEventListener('mouseenter', function() {
            const dots = this.querySelectorAll('.floating-dot');
            dots.forEach((dot, i) => {
                dot.style.animationPlayState = 'paused';
                dot.style.transform = `translateY(-${20 + i * 5}px) scale(1.5)`;
                dot.style.background = '#0ea5e9';
                dot.style.boxShadow = '0 0 15px rgba(14, 165, 233, 0.8)';
            });
            
            const icon = this.querySelector('.mega-emoji');
            if (icon) {
                icon.style.animation = 'none';
                icon.style.transform = 'scale(1.4) rotate(15deg)';
                icon.style.filter = 'brightness(1.4) drop-shadow(0 0 25px rgba(255,255,255,0.9))';
            }
            
            const indicatorBar = this.querySelector('.indicator-bar');
            if (indicatorBar) {
                indicatorBar.style.width = '60px';
                indicatorBar.style.background = 'linear-gradient(90deg, #0ea5e9, #60a5fa)';
            }
        });
        
        card.addEventListener('mouseleave', function() {
            const dots = this.querySelectorAll('.floating-dot');
            dots.forEach(dot => {
                dot.style.animationPlayState = 'running';
                dot.style.transform = '';
                dot.style.background = '';
                dot.style.boxShadow = '';
            });
            
            const icon = this.querySelector('.mega-emoji');
            if (icon) {
                icon.style.animation = '';
                icon.style.transform = '';
                icon.style.filter = '';
            }
            
            const indicatorBar = this.querySelector('.indicator-bar');
            if (indicatorBar) {
                indicatorBar.style.width = '';
                indicatorBar.style.background = '';
            }
        });
        
        card.addEventListener('click', function() {
            const metric = this.querySelector('.advantage-metric');
            if (metric) {
                const originalText = metric.textContent;
                metric.style.animation = 'none';
                metric.style.transform = 'scale(1.5) rotate(360deg)';
                metric.style.color = '#60a5fa';
                metric.style.textShadow = '0 0 30px rgba(96, 165, 250, 0.8)';
                
                setTimeout(() => {
                    metric.style.animation = '';
                    metric.style.transform = '';
                    metric.style.color = '';
                    metric.style.textShadow = '';
                }, 1000);
            }
            
            const title = this.querySelector('h4').textContent;
            showEnhancedNotification(`üèÜ ${title} - –¥–µ—Ç–∞–ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!`, 'success');
        });
    });

    // Enhanced icon animations
    const animatedIcons = document.querySelectorAll('[class*="animate-"]');
    
    animatedIcons.forEach(icon => {
        icon.addEventListener('click', function() {
            this.style.animation = 'none';
            this.style.transform = 'scale(1.5) rotate(720deg)';
            this.style.filter = 'brightness(2) drop-shadow(0 0 30px #0ea5e9)';
            
            setTimeout(() => {
                this.style.animation = '';
                this.style.transform = '';
                this.style.filter = '';
            }, 1000);
        });
        
        icon.addEventListener('mouseenter', function() {
            this.style.animationPlayState = 'paused';
            this.style.transform = 'scale(1.3) rotate(15deg)';
            this.style.filter = 'brightness(1.3) drop-shadow(0 0 20px rgba(14, 165, 233, 0.6))';
        });
        
        icon.addEventListener('mouseleave', function() {
            this.style.animationPlayState = 'running';
            this.style.transform = '';
            this.style.filter = '';
        });
    });

    // Enhanced CTA section interactions
    const ctaButtons = document.querySelectorAll('.btn-cta-primary, .btn-cta-secondary');
    
    ctaButtons.forEach(button => {
        button.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-5px) scale(1.05)';
            this.style.boxShadow = '0 20px 40px rgba(14, 165, 233, 0.4)';
            createRipple(this);
        });
        
        button.addEventListener('mouseleave', function() {
            this.style.transform = '';
            this.style.boxShadow = '';
        });
    });

    // Audit icon special effects
    const auditIcon = document.querySelector('.audit-icon');
    
    if (auditIcon) {
        auditIcon.addEventListener('click', function() {
            this.style.animation = 'none';
            this.style.transform = 'scale(2) rotate(1080deg)';
            this.style.filter = 'brightness(3) drop-shadow(0 0 40px #0ea5e9)';
            
            createExplosionEffect(this);
            
            setTimeout(() => {
                this.style.animation = 'auditPulse 2s ease-in-out infinite';
                this.style.transform = '';
                this.style.filter = '';
            }, 2000);
        });
    }

    // Government phone enhanced interaction
    const governmentPhone = document.querySelector('.government-phone');
    
    if (governmentPhone) {
        governmentPhone.addEventListener('click', function(e) {
            e.preventDefault();
            
            this.style.animation = 'phoneRing 0.5s ease-in-out 3';
            
            showEnhancedNotification('üìû –°–æ–µ–¥–∏–Ω—è–µ–º —Å –æ—Ç–¥–µ–ª–æ–º –≥–æ—Å–∑–∞–∫–∞–∑—á–∏–∫–æ–≤...', 'info');
            
            setTimeout(() => {
                this.style.animation = '';
                window.location.href = this.href;
            }, 1500);
        });
    }

    // Floating messages system
    function showFloatingMessage(text, element) {
        const message = document.createElement('div');
        message.textContent = text;
        message.style.cssText = `
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #0ea5e9, #0369a1);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            white-space: nowrap;
            z-index: 1000;
            animation: floatUp 2s ease-out forwards;
            pointer-events: none;
        `;
        
        element.style.position = 'relative';
        element.appendChild(message);
        
        setTimeout(() => message.remove(), 2000);
    }

    // Document details modal
    function showDocumentDetails(documentCard) {
        const title = documentCard.querySelector('h4').textContent;
        const description = documentCard.querySelector('p').textContent;
        const badge = documentCard.querySelector('.status-badge').textContent;
        
        const modal = document.createElement('div');
        modal.innerHTML = `
            <div class="document-modal-backdrop" style="
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease-out;
            ">
                <div class="document-modal-content" style="
                    background: white;
                    border-radius: 20px;
                    padding: 40px;
                    max-width: 500px;
                    margin: 20px;
                    text-align: center;
                    animation: slideInScale 0.4s ease-out;
                ">
                    <div style="font-size: 48px; margin-bottom: 20px;">üìÑ</div>
                    <h3 style="color: #1f2937; margin-bottom: 15px;">${title}</h3>
                    <p style="color: #6b7280; margin-bottom: 20px;">${description}</p>
                    <div style="margin-bottom: 30px;">
                        <span style="
                            background: linear-gradient(135deg, #0ea5e9, #0369a1);
                            color: white;
                            padding: 8px 16px;
                            border-radius: 20px;
                            font-size: 12px;
                            font-weight: 700;
                        ">${badge}</span>
                    </div>
                    <button class="close-modal" style="
                        background: #0ea5e9;
                        color: white;
                        border: none;
                        padding: 12px 24px;
                        border-radius: 25px;
                        font-weight: 600;
                        cursor: pointer;
                        transition: all 0.3s ease;
                    ">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            </div>
        `;
        
        document.body.appendChild(modal);
        
        modal.querySelector('.close-modal').addEventListener('click', () => {
            modal.style.animation = 'fadeOut 0.3s ease-out';
            setTimeout(() => modal.remove(), 300);
        });
        
        modal.querySelector('.document-modal-backdrop').addEventListener('click', (e) => {
            if (e.target === e.currentTarget) {
                modal.style.animation = 'fadeOut 0.3s ease-out';
                setTimeout(() => modal.remove(), 300);
            }
        });
    }

    // Ripple effect creator
    function createRipple(element) {
        const ripple = document.createElement('div');
        ripple.style.cssText = `
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255,255,255,0.6) 0%, transparent 70%);
            transform: translate(-50%, -50%);
            animation: rippleEffect 0.6s ease-out;
            pointer-events: none;
        `;
        
        element.style.position = 'relative';
        element.style.overflow = 'hidden';
        element.appendChild(ripple);
        
        setTimeout(() => ripple.remove(), 600);
    }

    // Explosion effect for special interactions
    function createExplosionEffect(element) {
        for (let i = 0; i < 12; i++) {
            const particle = document.createElement('div');
            particle.style.cssText = `
                position: absolute;
                top: 50%;
                left: 50%;
                width: 4px;
                height: 4px;
                background: #0ea5e9;
                border-radius: 50%;
                transform: translate(-50%, -50%);
                animation: explode-${i} 1s ease-out forwards;
                pointer-events: none;
            `;
            
            element.style.position = 'relative';
            element.appendChild(particle);
            
            setTimeout(() => particle.remove(), 1000);
        }
    }

    // Add custom CSS animations
    const style = document.createElement('style');
    style.textContent = `
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px) rotate(-5deg); }
            75% { transform: translateX(5px) rotate(5deg); }
        }
        
        @keyframes phoneRing {
            0%, 100% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.1) rotate(-5deg); }
            75% { transform: scale(1.1) rotate(5deg); }
        }
        
        @keyframes floatUp {
            0% { opacity: 0; transform: translateX(-50%) translateY(0); }
            50% { opacity: 1; }
            100% { opacity: 0; transform: translateX(-50%) translateY(-40px); }
        }
        
        @keyframes rippleEffect {
            0% { width: 0; height: 0; opacity: 1; }
            100% { width: 200px; height: 200px; opacity: 0; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        
        @keyframes slideInScale {
            from { transform: scale(0.7) translateY(30px); opacity: 0; }
            to { transform: scale(1) translateY(0); opacity: 1; }
        }
    `;
    
    for (let i = 0; i < 12; i++) {
        const angle = (i * 30) * (Math.PI / 180);
        const distance = 50;
        const x = Math.cos(angle) * distance;
        const y = Math.sin(angle) * distance;
        
        style.textContent += `
            @keyframes explode-${i} {
                0% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
                100% { transform: translate(-50%, -50%) translate(${x}px, ${y}px) scale(0); opacity: 0; }
            }
        `;
    }
    
    document.head.appendChild(style);
});

// Enhanced notification system
function showEnhancedNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.className = `enhanced-notification notification-${type}`;
    
    const icons = {
        'success': '‚úÖ',
        'info': '‚ÑπÔ∏è',
        'warning': '‚ö†Ô∏è',
        'error': '‚ùå'
    };
    
    const colors = {
        'success': 'linear-gradient(135deg, #10b981, #059669)',
        'info': 'linear-gradient(135deg, #0ea5e9, #0369a1)',
        'warning': 'linear-gradient(135deg, #f59e0b, #d97706)',
        'error': 'linear-gradient(135deg, #ef4444, #dc2626)'
    };
    
    notification.innerHTML = `
        <div class="notification-content">
            <div class="notification-icon">${icons[type]}</div>
            <div class="notification-text">${message}</div>
            <div class="notification-close">&times;</div>
        </div>
        <div class="notification-progress"></div>
    `;
    
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${colors[type]};
        color: white;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        z-index: 10001;
        animation: slideInRight 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        cursor: pointer;
        max-width: 400px;
        min-width: 300px;
        overflow: hidden;
    `;
    
    const style = document.createElement('style');
    style.textContent = `
        .enhanced-notification .notification-content {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .enhanced-notification .notification-icon {
            font-size: 24px;
            animation: iconBounce 0.6s ease-out;
        }
        
        .enhanced-notification .notification-text {
            flex: 1;
            font-weight: 600;
            line-height: 1.4;
        }
        
        .enhanced-notification .notification-close {
            font-size: 20px;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.3s ease;
            padding: 5px;
        }
        
        .enhanced-notification .notification-close:hover {
            opacity: 1;
            transform: scale(1.1);
        }
        
        .enhanced-notification .notification-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 3px;
            background: rgba(255, 255, 255, 0.3);
            width: 100%;
            animation: progressBar 5s linear forwards;
        }
        
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        @keyframes iconBounce {
            0%, 20%, 50%, 80%, 100% { transform: scale(1); }
            40% { transform: scale(1.2); }
            60% { transform: scale(1.1); }
        }
        
        @keyframes progressBar {
            from { width: 100%; }
            to { width: 0%; }
        }
    `;
    document.head.appendChild(style);
    
    document.body.appendChild(notification);
    
    const autoRemoveTimeout = setTimeout(() => {
        removeNotification();
    }, 5000);
    
    function removeNotification() {
        clearTimeout(autoRemoveTimeout);
        notification.style.animation = 'slideOutRight 0.5s ease-out';
        setTimeout(() => {
            if (notification.parentNode) {
                notification.remove();
            }
        }, 500);
    }
    
    notification.addEventListener('click', removeNotification);
    
    notification.addEventListener('mouseenter', () => {
        clearTimeout(autoRemoveTimeout);
        notification.querySelector('.notification-progress').style.animationPlayState = 'paused';
    });
    
    notification.addEventListener('mouseleave', () => {
        notification.querySelector('.notification-progress').style.animationPlayState = 'running';
        setTimeout(removeNotification, 2000);
    });
}

// Government-specific functions
function downloadForm(docType) {
    showEnhancedNotification('üìã –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º —Ñ–æ—Ä–º—É –∑–∞—è–≤–∫–∏...', 'info');
    
    setTimeout(() => {
        showEnhancedNotification('‚¨áÔ∏è –§–æ—Ä–º–∞ –∑–∞—è–≤–∫–∏ —É—Å–ø–µ—à–Ω–æ —Å–∫–∞—á–∞–Ω–∞!', 'success');
    }, 1500);
}

function requestQuote() {
    showEnhancedNotification('üì® –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è...', 'info');
    
    setTimeout(() => {
        showEnhancedNotification('‚úÖ –ó–∞–ø—Ä–æ—Å –ö–ü –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ 2 —á–∞—Å–æ–≤.', 'success');
    }, 2000);
}

// Add advanced scroll effects
window.addEventListener('scroll', () => {
    const scrolled = window.pageYOffset;
    const rate = scrolled * -0.5;
    
    const bgElements = document.querySelectorAll('.advantage-background-effect, .mega-card-glow');
    bgElements.forEach(element => {
        element.style.transform = `translateY(${rate}px)`;
    });
    
    const sectionIcons = document.querySelectorAll('.section-icon .icon');
    sectionIcons.forEach(icon => {
        const rect = icon.getBoundingClientRect();
        const inView = rect.top < window.innerHeight && rect.bottom > 0;
        
        if (inView) {
            const progress = (window.innerHeight - rect.top) / window.innerHeight;
            const scale = 0.8 + (progress * 0.4);
            icon.style.transform = `scale(${Math.min(scale, 1.2)})`;
        }
    });
});

// Initialize advanced features
document.addEventListener('DOMContentLoaded', function() {
    document.body.style.opacity = '0';
    document.body.style.transition = 'opacity 0.5s ease-out';
    
    setTimeout(() => {
        document.body.style.opacity = '1';
    }, 100);
    
    setTimeout(() => {
        showEnhancedNotification('üèõÔ∏è –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –¥–ª—è –≥–æ—Å–∑–∞–∫–∞–∑—á–∏–∫–æ–≤.', 'info');
    }, 2000);
});
// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∑–∞–ø—Ä–æ—Å–∞ –ö–ü
function requestQuote() {
    document.getElementById('quoteModal').style.display = 'block';
    document.body.style.overflow = 'hidden';
}

function closeQuoteModal() {
    document.getElementById('quoteModal').style.display = 'none';
    document.body.style.overflow = 'auto';
}

// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
window.onclick = function(event) {
    const modal = document.getElementById('quoteModal');
    if (event.target === modal) {
        closeQuoteModal();
    }
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
document.getElementById('quoteForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const formData = new FormData(this);
    
    fetch('/submit-quote/', {
        method: 'POST',
        body: formData,
        headers: {
            'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
        }
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            alert('–ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.');
            closeQuoteModal();
            this.reset();
        } else {
            alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞—è–≤–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞—è–≤–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.');
    });
});

// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≥–∞–ª–µ—Ä–µ–∏
let currentSlideIndex = 0;

function changeSlide(sliderId, direction) {
    const slider = document.getElementById(sliderId);
    const slides = slider.querySelectorAll('.gallery-slide');
    const dots = document.querySelectorAll('.gallery-dots .dot');
    
    if (slides.length === 0) return;
    
    // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å —Ç–µ–∫—É—â–µ–≥–æ —Å–ª–∞–π–¥–∞
    slides[currentSlideIndex].classList.remove('active');
    dots[currentSlideIndex].classList.remove('active');
    
    // –í—ã—á–∏—Å–ª—è–µ–º –Ω–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å
    currentSlideIndex += direction;
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥—Ä–∞–Ω–∏—Ü—ã
    if (currentSlideIndex >= slides.length) {
        currentSlideIndex = 0;
    } else if (currentSlideIndex < 0) {
        currentSlideIndex = slides.length - 1;
    }
    
    // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ –Ω–æ–≤–æ–º—É —Å–ª–∞–π–¥—É
    slides[currentSlideIndex].classList.add('active');
    dots[currentSlideIndex].classList.add('active');
}

function currentSlide(sliderId, slideNumber) {
    const slider = document.getElementById(sliderId);
    const slides = slider.querySelectorAll('.gallery-slide');
    const dots = document.querySelectorAll('.gallery-dots .dot');
    
    if (slides.length === 0) return;
    
    // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö —Å–ª–∞–π–¥–æ–≤
    slides.forEach(slide => slide.classList.remove('active'));
    dots.forEach(dot => dot.classList.remove('active'));
    
    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π —Å–ª–∞–π–¥
    currentSlideIndex = slideNumber - 1;
    slides[currentSlideIndex].classList.add('active');
    dots[currentSlideIndex].classList.add('active');
}

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–º–µ–Ω–∞ —Å–ª–∞–π–¥–æ–≤
function startAutoSlide(sliderId) {
    setInterval(() => {
        changeSlide(sliderId, 1);
    }, 5000); // –ú–µ–Ω—è–µ–º —Å–ª–∞–π–¥ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥–∞–ª–µ—Ä–µ–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', function() {
    const auditGallery = document.getElementById('auditGallerySlider');
    if (auditGallery) {
        startAutoSlide('auditGallerySlider');
    }
});
</script>

